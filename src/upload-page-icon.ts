// TODO: update page icon through API
// TODO: auto search for matching icons on google, send user suggestions
import { Client } from "@notionhq/client";
const notion = new Client({ auth: process.env.NOTION_API_KEY });

// const testPageName = "updatePageIcon test page";
const testPageId = "8b619c18d0ad410f887fda900209f128";
const imageUrl =
  "data:image/png;base64,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";

const updatePageIcon = async (pageId: string) => {
  // beset practice is to not actually delete, but set `archived` to true.
  // also safer for exposing Notion through Telegram, if anyone would get access to your bot.
  // TODO: cannot upload custom images through API asof dec '22
  await notion.pages.update({
    page_id: pageId,
    icon: { type: "emoji", emoji: "ðŸ“»" },
    // icon: { type: "file", file: { url: imageUrl } },
  });
  const res = await notion.pages.retrieve({ page_id: pageId });
  //   notion.pages.update({})
  console.log("res: ", JSON.stringify(res));
};

(async () => updatePageIcon(testPageId))();
